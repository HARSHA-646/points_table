<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Free Fire Tournament Points Table</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: white;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 30px;
      animation: fadeIn 2s ease-in-out;
    }
    .table-container {
      animation: slideIn 2s ease-in-out;
    }
    .qualify-message {
      margin-top: 20px;
      padding: 10px;
      border-radius: 10px;
      font-weight: bold;
    }
    .btn-checkmatch {
      float: right;
    }
    @keyframes slideIn {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <h1>Free Fire Tournament</h1>
  <h2>Points Table</h2>

  <div class="container table-container">
    <table class="table table-dark table-striped table-bordered text-center" id="pointsTable">
      <thead class="table-primary">
        <tr>
          <th>Position</th>
          <th>Team</th>
          <th>Played</th>
          <th>Won</th>
          <th>Net Win Rounds</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        <!-- Filled dynamically -->
      </tbody>
    </table>

    <div id="qualificationScenario" class="qualify-message bg-info text-dark d-none">
      <!-- Filled dynamically -->
    </div>
  </div>

  <h2 class="mt-5">Match Schedule</h2>
  <div class="container">
    <ul class="list-group list-group-flush" id="matchSchedule">
      <!-- Schedule will be added dynamically -->
    </ul>
  </div>

  <script>
    const teams = [
      { name: "harsha", played: 0, won: 0, netWinRounds: 0 },
      { name: "praveen", played: 0, won: 0, netWinRounds: 0 },
      { name: "rahul", played: 0, won: 0, netWinRounds: 0 },
      { name: "vinay", played: 0, won: 0, netWinRounds: 0 },
    ];

    const matches = [
      "harsha vs praveen",
      "rahul vs vinay",
      "praveen vs vinay",
      "rahul vs harsha",
      "harsha vs vinay",
      "rahul vs praveen"
    ];

    const completedMatches = new Set();

    function renderTable() {
      teams.sort((a, b) => {
        if (b.won === a.won) return b.netWinRounds - a.netWinRounds;
        return b.won - a.won;
      });

      const tableBody = document.getElementById("tableBody");
      tableBody.innerHTML = "";

      teams.forEach((team, index) => {
        const row = `<tr>
          <td>${index + 1}</td>
          <td>${team.name}</td>
          <td>${team.played}</td>
          <td>${team.won}</td>
          <td>${team.netWinRounds}</td>
        </tr>`;
        tableBody.innerHTML += row;
      });

      if (teams.every(team => team.played >= 3)) {
        document.getElementById("qualificationScenario").classList.remove("d-none");
        document.getElementById("qualificationScenario").innerHTML =
          `üèÜ <strong>${teams[0].name}</strong> qualifies directly to the final.<br>
          ‚öîÔ∏è <strong>${teams[1].name}</strong> vs <strong>${teams[2].name}</strong> will play the eliminator.`;
      }
    }

    function renderSchedule() {
      const matchList = document.getElementById("matchSchedule");
      matchList.innerHTML = "";
      matches.forEach((match, idx) => {
        const matchItem = document.createElement("li");
        matchItem.className = "list-group-item bg-dark text-white";
        matchItem.innerHTML = `Match ${idx + 1}: ${match} <button class="btn btn-success btn-sm btn-checkmatch" onclick="completeMatch(${idx})">‚úîÔ∏è</button>`;
        matchList.appendChild(matchItem);
      });
    }

    function completeMatch(index) {
      if (completedMatches.has(index)) {
        alert("This match is already completed.");
        return;
      }

      const [team1, team2] = matches[index].split(" vs ").map(t => t.trim().toLowerCase());
      const winnerInput = prompt(`Who won the match? (${team1} or ${team2})`);
      const winner = winnerInput ? winnerInput.trim().toLowerCase() : "";
      const marginInput = prompt("Enter win margin (number of rounds):");
      const margin = parseInt(marginInput);

      if (!winner || isNaN(margin)) {
        alert("Invalid input.");
        return;
      }

      const loser = winner === team1 ? team2 : team1;

      const winTeam = teams.find(t => t.name.toLowerCase() === winner);
      const loseTeam = teams.find(t => t.name.toLowerCase() === loser);

      if (!winTeam || !loseTeam) {
        alert("Invalid team name.");
        return;
      }

      winTeam.played += 1;
      winTeam.won += 1;
      winTeam.netWinRounds += margin;

      loseTeam.played += 1;

      completedMatches.add(index);
      renderTable();
    }

    renderTable();
    renderSchedule();
  </script>
</body>
</html>
